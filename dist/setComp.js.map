{"version":3,"sources":["../scripts/setComp.js"],"names":["basepath","cptName","process","argv","splice","path","split","name","length","writes","reads","__dirname","file","author","require","homedir","pop","exists","Promise","a","fs","existsSync","mkdir","res","rej","err","catch","console","log","readFile","text","readFileSync","toString","replace","format","push","writeFile","i","creatPage","error"],"mappings":"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","file":"setComp.js","sourcesContent":["\n\nimport fs from \"fs\";\nimport moment from \"moment\";\n\nlet basepath = \"src/components/\";\nlet cptName = process.argv.splice(2)[0];\nlet path = cptName.split(\"/\");\nlet name = path[path.length - 1];\nlet writes = [`index.js`, \"index.less\"];\nlet reads = [\n  `${__dirname}/../src/components/compDemo/index.js`,\n  `${__dirname}/../src/components/compDemo/index.less`\n];\nlet file = [];\nlet author = require(\"os\")\n  .homedir()\n  .split(\"\\\\\")\n  .pop();\n\n//检测是否存在文件夹\nlet exists = function() {\n  return new Promise(res => {\n    (async function() {\n      for (let a of path) {\n        fs.existsSync(basepath + a)\n          ? (basepath = `${basepath}${a}/`)\n          : await mkdir(a);\n      }\n      res(basepath);\n    })();\n  });\n};\n//建立文件夹\nlet mkdir = function(a) {\n  return new Promise((res, rej) => {\n    fs.mkdir(basepath + a, err => {\n      if (err) rej(err);\n      basepath = `${basepath}${a}/`;\n      res(basepath);\n    });\n  }).catch(err => console.log(err));\n};\n//读取模板文件内容，并替换为目标组件\nlet readFile = function() {\n  return new Promise(res => {\n    for (let a of reads) {\n      let text = fs.readFileSync(a).toString();\n      text = text\n        .replace(/time/g, moment().format(\"YYYY/MM/DD\"))\n        .replace(/temp/g, name)\n        .replace(/author/g, author);\n      file.push(text);\n    }\n    res(file);\n  });\n};\n//生成文件，并填入之前读取的文件内容\nlet writeFile = function(file) {\n  return new Promise((res, rej) => {\n    (async function() {\n      for (let i = 0; i < writes.length; i++) {\n        await fs.writeFile(`${basepath}${writes[i]}`, file[i], err => {\n          if (err) rej(err);\n        });\n      }\n      res(\"succ\");\n    })();\n  });\n};\nasync function creatPage() {\n  try {\n    await exists();\n    await readFile();\n    await writeFile(await readFile());\n    return console.log(`Successfully created ${name} components`);\n  } catch (err) {\n    console.error(err);\n  }\n}\ncreatPage();\n"]}