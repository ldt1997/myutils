{"version":3,"sources":["../scripts/setHook.js"],"names":["basepath","cptName","process","argv","splice","path","split","name","length","writes","reads","__dirname","file","author","require","homedir","pop","exists","Promise","a","fs","existsSync","mkdir","res","rej","err","then","console","log","catch","readFile","text","readFileSync","toString","replace","format","push","writeFile","i","creatPage","error"],"mappings":";;AACA;;;;AACA;;;;;;AAEA,IAAIA,WAAW,YAAf;AACA,IAAIC,UAAUC,QAAQC,IAAR,CAAaC,MAAb,CAAoB,CAApB,EAAuB,CAAvB,CAAd;AACA,IAAIC,OAAOJ,QAAQK,KAAR,CAAc,GAAd,CAAX;AACA,IAAIC,OAAOF,KAAKA,KAAKG,MAAL,GAAc,CAAnB,CAAX;AACA,IAAIC,SAAS,kDAIDF,IAJC,6BAKCA,IALD,kBAMX,aANW,CAAb;AAQA,IAAIG,QAAQ,CACPC,SADO,sCAEPA,SAFO,sCAGPA,SAHO,uCAIPA,SAJO,6CAKPA,SALO,kDAMPA,SANO,wCAAZ;AAQA,IAAIC,OAAO,EAAX;AACA,IAAIC,SAASC,QAAQ,IAAR,EACVC,OADU,GAEVT,KAFU,CAEJ,IAFI,EAGVU,GAHU,EAAb;;AAKA;AACA,IAAIC,SAAS,SAATA,MAAS,GAAW;AACtB,SAAO,IAAIC,OAAJ,CAAY,eAAO;AACxB,KAAC,kBAAiB;AAAA;AAAA;AAAA;;AAAA;AAChB,6BAAcb,IAAd,8HAAoB;AAAA,cAAXc,CAAW;;AAClBC,uBAAGC,UAAH,CAAcrB,WAAWmB,CAAzB,IACKnB,gBAAcA,QAAd,GAAyBmB,CAAzB,MADL,GAEI,MAAMG,MAAMH,CAAN,CAFV;AAGD;AALe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMhBI,UAAIvB,QAAJ;AACD,KAPD;AAQD,GATM,CAAP;AAUD,CAXD;AAYA;AACA,IAAIsB,QAAQ,SAARA,KAAQ,CAASH,CAAT,EAAY;AACtB,SAAO,IAAID,OAAJ,CAAY,UAACK,GAAD,EAAMC,GAAN,EAAc;AAC/BJ,iBAAGE,KAAH,CAAStB,WAAWmB,CAApB,EAAuB,eAAO;AAC5B,UAAIM,GAAJ,EAASD,IAAIC,GAAJ;AACTzB,sBAAcA,QAAd,GAAyBmB,CAAzB;AACAI,UAAIvB,QAAJ;AACD,KAJD;AAKD,GANM,EAOJ0B,IAPI,CAOC,YAAM;AACVN,iBAAGE,KAAH,CAAYtB,QAAZ,aAA8B,eAAO;AACnC,UAAIyB,GAAJ,EAASE,QAAQC,GAAR,CAAYH,GAAZ;AACV,KAFD;AAGAL,iBAAGE,KAAH,CAAYtB,QAAZ,eAAgC,eAAO;AACrC,UAAIyB,GAAJ,EAASE,QAAQC,GAAR,CAAYH,GAAZ;AACV,KAFD;AAGD,GAdI,EAeJI,KAfI,CAeE;AAAA,WAAOF,QAAQC,GAAR,CAAYH,GAAZ,CAAP;AAAA,GAfF,CAAP;AAgBD,CAjBD;AAkBA;AACA,IAAIK,WAAW,SAAXA,QAAW,GAAW;AACxB,SAAO,IAAIZ,OAAJ,CAAY,eAAO;AAAA;AAAA;AAAA;;AAAA;AACxB,4BAAcR,KAAd,mIAAqB;AAAA,YAAZS,CAAY;;AACnB,YAAIY,OAAOX,aAAGY,YAAH,CAAgBb,CAAhB,EAAmBc,QAAnB,EAAX;AACAF,eAAOA,KACJG,OADI,CACI,OADJ,EACa,wBAASC,MAAT,CAAgB,YAAhB,CADb,EAEJD,OAFI,CAEI,OAFJ,EAEa3B,IAFb,EAGJ2B,OAHI,CAGI,SAHJ,EAGerB,MAHf,CAAP;AAIAD,aAAKwB,IAAL,CAAUL,IAAV;AACD;AARuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AASxBR,QAAIX,IAAJ;AACD,GAVM,CAAP;AAWD,CAZD;AAaA;AACA,IAAIyB,YAAY,SAAZA,SAAY,CAASzB,IAAT,EAAe;AAC7B,SAAO,IAAIM,OAAJ,CAAY,UAACK,GAAD,EAAMC,GAAN,EAAc;AAC/B,KAAC,kBAAiB;AAChB,WAAK,IAAIc,IAAI,CAAb,EAAgBA,IAAI7B,OAAOD,MAA3B,EAAmC8B,GAAnC,EAAwC;AACtC,cAAMlB,aAAGiB,SAAH,MAAgBrC,QAAhB,GAA2BS,OAAO6B,CAAP,CAA3B,EAAwC1B,KAAK0B,CAAL,CAAxC,EAAiD,eAAO;AAC5D,cAAIb,GAAJ,EAASD,IAAIC,GAAJ;AACV,SAFK,CAAN;AAGD;AACDF,UAAI,MAAJ;AACD,KAPD;AAQD,GATM,CAAP;AAUD,CAXD;AAYA,eAAegB,SAAf,GAA2B;AACzB,MAAI;AACF,UAAMtB,QAAN;AACA,UAAMa,UAAN;AACA,UAAMO,WAAU,MAAMP,UAAhB,EAAN;AACA,WAAOH,QAAQC,GAAR,2BAAoCrB,IAApC,WAAP;AACD,GALD,CAKE,OAAOkB,GAAP,EAAY;AACZE,YAAQa,KAAR,CAAcf,GAAd;AACD;AACF;AACDc","file":"setHook.js","sourcesContent":["\nimport fs from \"fs\";\nimport moment from \"moment\";\n\nlet basepath = \"src/pages/\";\nlet cptName = process.argv.splice(2)[0];\nlet path = cptName.split(\"/\");\nlet name = path[path.length - 1];\nlet writes = [\n  `index.js`,\n  `Page.jsx`,\n  `Page.less`,\n  `models/${name}Model.js`,\n  `services/${name}Services.js`,\n  \"MapProps.js\"\n];\nlet reads = [\n  `${__dirname}/../src/pages/hookDemo/index.js`,\n  `${__dirname}/../src/pages/hookDemo/Page.jsx`,\n  `${__dirname}/../src/pages/hookDemo/Page.less`,\n  `${__dirname}/../src/pages/hookDemo/models/model.js`,\n  `${__dirname}/../src/pages/hookDemo/services/services.js`,\n  `${__dirname}/../src/pages/hookDemo/MapProps.js`\n];\nlet file = [];\nlet author = require(\"os\")\n  .homedir()\n  .split(\"\\\\\")\n  .pop();\n\n//检测是否存在文件夹\nlet exists = function() {\n  return new Promise(res => {\n    (async function() {\n      for (let a of path) {\n        fs.existsSync(basepath + a)\n          ? (basepath = `${basepath}${a}/`)\n          : await mkdir(a);\n      }\n      res(basepath);\n    })();\n  });\n};\n//建立文件夹\nlet mkdir = function(a) {\n  return new Promise((res, rej) => {\n    fs.mkdir(basepath + a, err => {\n      if (err) rej(err);\n      basepath = `${basepath}${a}/`;\n      res(basepath);\n    });\n  })\n    .then(() => {\n      fs.mkdir(`${basepath}models`, err => {\n        if (err) console.log(err);\n      });\n      fs.mkdir(`${basepath}services`, err => {\n        if (err) console.log(err);\n      });\n    })\n    .catch(err => console.log(err));\n};\n//读取模板文件内容，并替换为目标组件\nlet readFile = function() {\n  return new Promise(res => {\n    for (let a of reads) {\n      let text = fs.readFileSync(a).toString();\n      text = text\n        .replace(/time/g, moment().format(\"YYYY/MM/DD\"))\n        .replace(/temp/g, name)\n        .replace(/author/g, author);\n      file.push(text);\n    }\n    res(file);\n  });\n};\n//生成文件，并填入之前读取的文件内容\nlet writeFile = function(file) {\n  return new Promise((res, rej) => {\n    (async function() {\n      for (let i = 0; i < writes.length; i++) {\n        await fs.writeFile(`${basepath}${writes[i]}`, file[i], err => {\n          if (err) rej(err);\n        });\n      }\n      res(\"succ\");\n    })();\n  });\n};\nasync function creatPage() {\n  try {\n    await exists();\n    await readFile();\n    await writeFile(await readFile());\n    return console.log(`Successfully created ${name} page`);\n  } catch (err) {\n    console.error(err);\n  }\n}\ncreatPage();\n"]}