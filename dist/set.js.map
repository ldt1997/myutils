{"version":3,"sources":["../scripts/set.js"],"names":["basepath","cptName","process","argv","splice","path","split","name","length","writes","reads","__dirname","file","author","os","homedir","pop","exists","Promise","a","fs","existsSync","mkdir","console","log","color","cyan_bt","res","rej","err","then","catch","readFile","text","readFileSync","toString","replace","format","push","writeFile","i","creatPage","green","error"],"mappings":";;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIA,WAAW,YAAf;AACA,IAAIC,UAAUC,QAAQC,IAAR,CAAaC,MAAb,CAAoB,CAApB,EAAuB,CAAvB,CAAd;AACA,IAAIC,OAAOJ,QAAQK,KAAR,CAAc,GAAd,CAAX;AACA,IAAIC,OAAOF,KAAKA,KAAKG,MAAL,GAAc,CAAnB,CAAX;AACA,IAAIC,SAAS,kDAIDF,IAJC,6BAKCA,IALD,iBAAb;AAOA,IAAIG,QAAQ,CACPC,SADO,kCAEPA,SAFO,kCAGPA,SAHO,mCAIPA,SAJO,yCAKPA,SALO,6CAAZ;AAOA,IAAIC,OAAO,EAAX;AACA,IAAIC,SAASC,aACVC,OADU,GAEVT,KAFU,CAEJ,IAFI,EAGVU,GAHU,EAAb;;AAKA;AACA,IAAIC,SAAS,SAATA,MAAS,GAAW;AACtB,SAAO,IAAIC,OAAJ,CAAY,eAAO;AACxB,KAAC,kBAAiB;AAAA;AAAA;AAAA;;AAAA;AAChB,6BAAcb,IAAd,8HAAoB;AAAA,cAAXc,CAAW;;AAClBC,uBAAGC,UAAH,CAAcrB,WAAWmB,CAAzB,IACKnB,gBAAcA,QAAd,GAAyBmB,CAAzB,MADL,GAEI,MAAMG,MAAMH,CAAN,CAFV;AAGD;AALe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMhBI,cAAQC,GAAR,CAAYC,oBAAMC,OAAN,CAAc,UAAd,CAAZ;AACAC,UAAI3B,QAAJ;AACD,KARD;AASD,GAVM,CAAP;AAWD,CAZD;;AAcA;AACA,IAAIsB,QAAQ,SAARA,KAAQ,CAASH,CAAT,EAAY;AACtB,SAAO,IAAID,OAAJ,CAAY,UAACS,GAAD,EAAMC,GAAN,EAAc;AAC/BR,iBAAGE,KAAH,CAAStB,WAAWmB,CAApB,EAAuB,eAAO;AAC5B,UAAIU,GAAJ,EAASD,IAAIC,GAAJ;AACT7B,sBAAcA,QAAd,GAAyBmB,CAAzB;AACAQ,UAAI3B,QAAJ;AACD,KAJD;AAKD,GANM,EAOJ8B,IAPI,CAOC,YAAM;AACVV,iBAAGE,KAAH,CAAYtB,QAAZ,aAA8B,eAAO;AACnC,UAAI6B,GAAJ,EAASN,QAAQC,GAAR,CAAYK,GAAZ;AACV,KAFD;AAGAT,iBAAGE,KAAH,CAAYtB,QAAZ,eAAgC,eAAO;AACrC,UAAI6B,GAAJ,EAASN,QAAQC,GAAR,CAAYK,GAAZ;AACV,KAFD;AAGD,GAdI,EAeJE,KAfI,CAeE;AAAA,WAAOR,QAAQC,GAAR,CAAYK,GAAZ,CAAP;AAAA,GAfF,CAAP;AAgBD,CAjBD;AAkBA;AACA,IAAIG,WAAW,SAAXA,QAAW,GAAW;AACxB,SAAO,IAAId,OAAJ,CAAY,eAAO;AAAA;AAAA;AAAA;;AAAA;AACxB,4BAAcR,KAAd,mIAAqB;AAAA,YAAZS,CAAY;;AACnB,YAAIc,OAAOb,aAAGc,YAAH,CAAgBf,CAAhB,EAAmBgB,QAAnB,EAAX;AACAF,eAAOA,KACJG,OADI,CACI,OADJ,EACa,wBAASC,MAAT,CAAgB,YAAhB,CADb,EAEJD,OAFI,CAEI,OAFJ,EAEa7B,IAFb,EAGJ6B,OAHI,CAGI,SAHJ,EAGevB,MAHf,CAAP;AAIAD,aAAK0B,IAAL,CAAUL,IAAV;AACD;AARuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AASxBV,YAAQC,GAAR,CAAYC,oBAAMC,OAAN,CAAc,YAAd,CAAZ;AACAC,QAAIf,IAAJ;AACD,GAXM,CAAP;AAYD,CAbD;AAcA;AACA,IAAI2B,YAAY,SAAZA,SAAY,CAAS3B,IAAT,EAAe;AAC7B,SAAO,IAAIM,OAAJ,CAAY,UAACS,GAAD,EAAMC,GAAN,EAAc;AAC/B,KAAC,kBAAiB;AAChB,WAAK,IAAIY,IAAI,CAAb,EAAgBA,IAAI/B,OAAOD,MAA3B,EAAmCgC,GAAnC,EAAwC;AACtC,cAAMpB,aAAGmB,SAAH,MAAgBvC,QAAhB,GAA2BS,OAAO+B,CAAP,CAA3B,EAAwC5B,KAAK4B,CAAL,CAAxC,EAAiD,eAAO;AAC5D,cAAIX,GAAJ,EAASD,IAAIC,GAAJ;AACV,SAFK,CAAN;AAGD;AACDN,cAAQC,GAAR,CAAYC,oBAAMC,OAAN,CAAc,UAAd,CAAZ;AACAC,UAAI,MAAJ;AACD,KARD;AASD,GAVM,CAAP;AAWD,CAZD;AAaA,eAAec,SAAf,GAA2B;AACzB,MAAI;AACF,UAAMxB,QAAN;AACA,UAAMe,UAAN;AACA,UAAMO,WAAU,MAAMP,UAAhB,EAAN;AACA,WAAOT,QAAQC,GAAR,CAAYC,oBAAMiB,KAAN,kCAAsCnC,IAAtC,WAAZ,CAAP;AACD,GALD,CAKE,OAAOsB,GAAP,EAAY;AACZN,YAAQoB,KAAR,CAAcd,GAAd;AACD;AACF;AACDY","file":"set.js","sourcesContent":["\n\nimport fs from \"fs\";\nimport moment from \"moment\";\nimport os from \"os\";\nimport color from \"colors-cli\";\n\nlet basepath = \"src/pages/\";\nlet cptName = process.argv.splice(2)[0];\nlet path = cptName.split(\"/\");\nlet name = path[path.length - 1];\nlet writes = [\n  `index.js`,\n  `Page.jsx`,\n  `Page.less`,\n  `models/${name}Model.js`,\n  `services/${name}Services.js`\n];\nlet reads = [\n  `${__dirname}/../src/pages/demo/index.js`,\n  `${__dirname}/../src/pages/demo/Page.jsx`,\n  `${__dirname}/../src/pages/demo/Page.less`,\n  `${__dirname}/../src/pages/demo/models/model.js`,\n  `${__dirname}/../src/pages/demo/services/services.js`\n];\nlet file = [];\nlet author = os\n  .homedir()\n  .split(\"\\\\\")\n  .pop();\n\n//检测是否存在文件夹\nlet exists = function() {\n  return new Promise(res => {\n    (async function() {\n      for (let a of path) {\n        fs.existsSync(basepath + a)\n          ? (basepath = `${basepath}${a}/`)\n          : await mkdir(a);\n      }\n      console.log(color.cyan_bt(\"√ 匹配路径成功\"));\n      res(basepath);\n    })();\n  });\n};\n\n//建立文件夹\nlet mkdir = function(a) {\n  return new Promise((res, rej) => {\n    fs.mkdir(basepath + a, err => {\n      if (err) rej(err);\n      basepath = `${basepath}${a}/`;\n      res(basepath);\n    });\n  })\n    .then(() => {\n      fs.mkdir(`${basepath}models`, err => {\n        if (err) console.log(err);\n      });\n      fs.mkdir(`${basepath}services`, err => {\n        if (err) console.log(err);\n      });\n    })\n    .catch(err => console.log(err));\n};\n//读取模板文件内容，并替换为目标组件\nlet readFile = function() {\n  return new Promise(res => {\n    for (let a of reads) {\n      let text = fs.readFileSync(a).toString();\n      text = text\n        .replace(/time/g, moment().format(\"YYYY/MM/DD\"))\n        .replace(/temp/g, name)\n        .replace(/author/g, author);\n      file.push(text);\n    }\n    console.log(color.cyan_bt(\"√ 读取模版文件成功\"));\n    res(file);\n  });\n};\n//生成文件，并填入之前读取的文件内容\nlet writeFile = function(file) {\n  return new Promise((res, rej) => {\n    (async function() {\n      for (let i = 0; i < writes.length; i++) {\n        await fs.writeFile(`${basepath}${writes[i]}`, file[i], err => {\n          if (err) rej(err);\n        });\n      }\n      console.log(color.cyan_bt(\"√ 生成文件成功\"));\n      res(\"succ\");\n    })();\n  });\n};\nasync function creatPage() {\n  try {\n    await exists();\n    await readFile();\n    await writeFile(await readFile());\n    return console.log(color.green(`√ Successfully created ${name} page`));\n  } catch (err) {\n    console.error(err);\n  }\n}\ncreatPage();\n"]}